<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YourMove — Clinician Access</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a0e17;--p1:#141922;--p2:#1a2236;
  --acc:#3b82f6;--acc2:#2563eb;
  --crit:#dc2626;
  --text:#f1f5f9;--t2:#94a3b8;--t3:#475569;
  --bdr:rgba(255,255,255,.06);--bdr2:rgba(255,255,255,.10);
}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}

/* Subtle gradient bg */
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 70% 50% at 50% 0%,rgba(59,130,246,.05) 0%,transparent 65%);pointer-events:none}

/* Navbar */
.navbar{background:var(--p1);border-bottom:1px solid var(--bdr);height:52px;display:flex;align-items:center;padding:0 24px}
.logo{display:flex;align-items:center;gap:9px;text-decoration:none}
.logo-mark{width:28px;height:28px;background:rgba(59,130,246,.12);border:1px solid rgba(59,130,246,.25);border-radius:7px;display:flex;align-items:center;justify-content:center}
.logo-text{font-size:14px;font-weight:700;color:var(--text);letter-spacing:-.01em}
.logo-sub{font-size:11px;color:var(--t3);border-left:1px solid var(--bdr);margin-left:8px;padding-left:8px}

/* Main */
main{flex:1;display:flex;align-items:center;justify-content:center;padding:32px 16px;position:relative;z-index:1}

/* Card */
.login-card{width:100%;max-width:380px;background:var(--p1);border:1px solid var(--bdr2);border-radius:8px;padding:32px}

/* Form elements */
.form-label{display:block;font-size:11px;font-weight:600;letter-spacing:.05em;text-transform:uppercase;color:var(--t3);margin-bottom:5px}
.form-input{width:100%;padding:8px 12px;background:rgba(0,0,0,.25);border:1px solid var(--bdr2);border-radius:5px;font-size:14px;color:var(--text);outline:none;transition:border-color .15s,box-shadow .15s;font-family:'Inter',sans-serif}
.form-input:focus{border-color:var(--acc);box-shadow:0 0 0 3px rgba(59,130,246,.12)}
.form-input::placeholder{color:var(--t3)}
.btn-submit{width:100%;padding:9px 16px;background:var(--acc);color:#fff;border:none;border-radius:5px;font-size:14px;font-weight:600;cursor:pointer;font-family:'Inter',sans-serif;transition:background .15s;display:flex;align-items:center;justify-content:center;gap:6px}
.btn-submit:hover:not(:disabled){background:var(--acc2)}
.btn-submit:disabled{opacity:.55;cursor:not-allowed}

/* Alert */
.alert{padding:9px 12px;border-radius:4px;font-size:12px;margin-bottom:16px;display:none}
.alert-error  {background:rgba(220,38,38,.1);border:1px solid rgba(220,38,38,.25);color:#fca5a5;display:block}
.alert-success{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.25);color:#93c5fd;display:block}

/* Demo box */
.demo-box{background:rgba(255,255,255,.03);border:1px solid var(--bdr);border-radius:5px;padding:10px 12px;cursor:pointer;transition:border-color .15s;margin-top:16px}
.demo-box:hover{border-color:rgba(59,130,246,.35)}

/* Security badges */
.sec-badge{display:inline-flex;align-items:center;gap:4px;font-size:10px;color:var(--t3)}
.sec-dot{width:5px;height:5px;border-radius:50%;background:#16a34a}

/* Footer */
footer{padding:18px 24px;border-top:1px solid var(--bdr);text-align:center}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <a class="logo" href="/">
    <div class="logo-mark">
      <svg width="14" height="14" viewBox="0 0 32 32" fill="none">
        <path d="M16 4l5 10H28l-8 7 3 11-8-5-8 5 3-11-8-7h7z" fill="#3b82f6"/>
      </svg>
    </div>
    <div class="logo-text">YourMove</div>
    <div class="logo-sub hidden sm:block">Clinical Analytics</div>
  </a>
</nav>

<!-- Main -->
<main>
  <div style="width:100%;max-width:380px">

    <!-- Header -->
    <div class="mb-6 text-center">
      <div style="width:48px;height:48px;background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.2);border-radius:10px;display:flex;align-items:center;justify-content:center;margin:0 auto 14px">
        <svg width="22" height="22" fill="none" stroke="#3b82f6" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
        </svg>
      </div>
      <h1 style="font-size:20px;font-weight:700;letter-spacing:-.02em;margin-bottom:4px">Clinician Access</h1>
      <p style="font-size:13px;color:var(--t3)">Sign in to access the clinical dashboard</p>
    </div>

    <!-- Card -->
    <div class="login-card">
      <!-- Alert -->
      <div id="alertMsg" class="alert"></div>

      <!-- Form -->
      <form id="loginForm">
        <div style="margin-bottom:14px">
          <label for="username" class="form-label">Username</label>
          <input type="text" id="username" required autocomplete="username"
                 placeholder="Enter username" class="form-input">
        </div>
        <div style="margin-bottom:20px">
          <label for="password" class="form-label">Password</label>
          <input type="password" id="password" required autocomplete="current-password"
                 placeholder="Enter password" class="form-input">
        </div>
        <button type="submit" id="submitBtn" class="btn-submit">
          <svg id="btnIcon" width="15" height="15" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
          </svg>
          <span id="btnText">Sign In</span>
        </button>
      </form>

      <!-- Demo credentials -->
      <div class="demo-box" onclick="fillDemo()">
        <div style="font-size:11px;font-weight:600;color:var(--t2);margin-bottom:4px">Evaluation credentials</div>
        <div style="font-size:12px;color:var(--t3)">
          Username: <span style="font-family:monospace;color:var(--acc)">admin</span>
          &nbsp;·&nbsp;
          Password: <span style="font-family:monospace;color:var(--acc)">admin123</span>
        </div>
        <div style="font-size:10px;color:var(--t3);margin-top:3px">Click to auto-fill</div>
      </div>
    </div>

    <!-- Security indicators -->
    <div style="display:flex;justify-content:center;gap:16px;margin-top:14px">
      <div class="sec-badge"><div class="sec-dot"></div>JWT Auth</div>
      <div class="sec-badge"><div class="sec-dot"></div>bcrypt</div>
      <div class="sec-badge"><div class="sec-dot"></div>Rate Limited</div>
      <div class="sec-badge"><div class="sec-dot"></div>8h Session</div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer>
  <div style="font-size:11px;color:var(--t3)">
    YourMove Clinical Platform v4.0 &nbsp;·&nbsp;
    <a href="/" style="color:var(--t3);text-decoration:none" onmouseover="this.style.color='var(--t2)'" onmouseout="this.style.color='var(--t3)'">Return to home</a>
  </div>
</footer>

<script>
function showAlert(msg, type) {
  const el = document.getElementById('alertMsg');
  el.className = `alert alert-${type}`;
  el.textContent = msg;
}

function fillDemo() {
  document.getElementById('username').value = 'admin';
  document.getElementById('password').value = 'admin123';
  document.getElementById('username').focus();
}

document.getElementById('loginForm').addEventListener('submit', async e => {
  e.preventDefault();
  const btn  = document.getElementById('submitBtn');
  const icon = document.getElementById('btnIcon');
  const txt  = document.getElementById('btnText');
  const user = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value;

  btn.disabled = true;
  txt.textContent = 'Authenticating…';
  icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>';

  try {
    const r = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username: user, password: pass }),
    });
    const data = await r.json();

    if (r.ok) {
      localStorage.setItem('jwt_token', data.access_token);
      showAlert('Authentication successful — redirecting…', 'success');
      txt.textContent = 'Redirecting…';
      setTimeout(() => { window.location.href = '/dashboard'; }, 800);
    } else if (r.status === 429) {
      showAlert('Too many attempts. Please wait 60 seconds before retrying.', 'error');
      btn.disabled = true;
      txt.textContent = 'Rate limited';
      setTimeout(() => { btn.disabled = false; txt.textContent = 'Sign In'; }, 60000);
    } else {
      showAlert(data.detail || 'Invalid username or password.', 'error');
      btn.disabled    = false;
      txt.textContent = 'Sign In';
      icon.innerHTML  = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>';
      document.getElementById('password').value = '';
      document.getElementById('password').focus();
    }
  } catch (err) {
    showAlert('Network error — check your connection.', 'error');
    btn.disabled    = false;
    txt.textContent = 'Sign In';
  }
});
</script>
</body>
</html>
